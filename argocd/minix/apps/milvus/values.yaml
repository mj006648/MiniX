# argocd/minix/apps/milvus/values.yaml

## 1. 클러스터 모드 비활성화 (Standalone은 훨씬 가볍고 관리가 쉽습니다)
cluster:
  enabled: false

## 2. 이미지 설정 (v2.6.8 사용)
image:
  all:
    tag: v2.6.8

## 3. 핵심 아키텍처 설정 (v2.6.x 신규 기능)
# v2.6.x부터는 별도의 Coordinator들이 mixCoordinator로 통합되었습니다.
# Standalone 모드에서는 자동으로 최적화되지만, 아래 설정을 유지하는 것이 좋습니다.
streaming:
  enabled: true  # 신규 스트리밍 노드 활성화

## 4. 메시지 큐 설정 (중요: 여기서 100Gi/200Gi 문제를 해결합니다)
# Standalone의 기본 큐인 woodpecker를 사용하고, Pulsarv3는 명시적으로 끕니다.
standalone:
  messageQueue: woodpecker
  persistence:
    enabled: true
    persistentVolumeClaim:
      storageClass: "rook-ceph-block"
      size: 20Gi  # 실제 벡터 데이터 저장 공간

# Pulsar v3 비활성화 (거대 PVC 생성 방지)
pulsarv3:
  enabled: false
pulsar:
  enabled: false

## 5. 의존성 리소스 최적화 (etcd, minio)
etcd:
  enabled: true
  replicaCount: 1  # 실험용이므로 1개면 충분
  persistence:
    storageClass: "rook-ceph-block"
    size: 5Gi

minio:
  enabled: true
  mode: standalone  # Distributed 모드 대신 Standalone 사용
  persistence:
    storageClass: "rook-ceph-block"
    size: 20Gi  # 기본 500Gi에서 현실적인 크기로 축소

## 6. Milvus 웹 UI (Attu) 활성화
# 데이터를 눈으로 확인하기 위해 필수입니다.
attu:
  enabled: true
  name: attu
  service:
    type: LoadBalancer  # 외부 접속 허용 (MetalLB 사용 중이시므로 IP 할당됨)
    port: 3000

## 7. 리소스 한도 설정 (선택 사항: 클러스터 부하 방지)
# standalone:
#   resources:
#     limits:
#       cpu: "2"
#       memory: "4Gi"
#     requests:
#       cpu: "1"
#       memory: "2Gi"
## 8. Milvus 메인 서비스 설정 (DB 엔진 외부 노출)
service:
  type: LoadBalancer  # <--- 메인 엔진도 외부 IP를 받도록 설정
  port: 19530

